@model IEnumerable<MajorStudent>
<div class="container">
    <h2 style="margin:0;padding:0;" class="text-center">当前毕业设计选择情况</h2>
    <table class="table table-hover">
        <thead>
            <tr>
                <th>题目</th>
                <th>学生姓名</th>
                <th>选择老师</th>
                <th>提交时间</th>
                <th>审核状态</th>
                <th>审核时间</th>
                <th>专业</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var x in Model)
            {
                <tr id="table-tr-@x.Id">
                    <td>@x.SubjectTitle</td>
                    <td>@x.StudentName</td>
                    <td>@x.TeacherName</td>
                    <td>@x.PostTime</td>
                    <td>@x.Draw</td>
                    <td>@x.DrawTime</td>
                    <td>@x.Major</td>
                    @if (x.Draw == Draw.待审核.ToString())
                    {
                        <td><a href="javascript:pass(@x.Id)" class="btn btn-success btn-sm">审核通过</a><a href="javascript:failure(@x.Id)" class="btn btn-danger btn-sm">审核不通过</a></td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>
<script type="text/javascript">
    function pass(id) {
        var jug = confirm("确定审核通过吗？");
        if (jug) {
            $.post("/Admin/Pass", { id: id },function(data){
                if (data == "success") {
                    alert("审核成功");
                    $("#table-tr-" + id).remove();
                }
                else {
                    alert("操作失败");
                }
            });
        }
    }
    function failure(id) {
        var jug = confirm("确定审核不通过吗？");
        if (jug) {
            $.post("/Admin/failure", { id: id }, function (data) {
                if (data == "success") {
                    alert("操作成功");
                    $("#table-tr-" + id).remove();
                }
                else {
                    alert("操作失败");
                }
            });
        }
    }
</script>

